# Wireguard-VPN-lab

О проекте
Лабораторная работа по настройке VPN-туннеля WireGuard между двумя виртуальными машинами (VirtualBox).  
Цель: освоить сетевую конфигурацию, VPN, работу с firewall и ключами.

Что сделано:
- Поднял 2 ВМ (Ubuntu Server) в VirtualBox.
- Настроил внутреннюю сеть (адаптер enp0s8).
- Установил WireGuard и сгенерировал ключи.
- Обменялся public-keys между узлами.
- Настроил `wg0.conf` на сервере и клиенте.
- Настроил firewall (UFW) для открытия UDP-порта 51820.
- Поднял туннель: получен handshake + работает передача пакетов.

Проблемы и решения
В процессе были сложности — вот основные:

1. Обе ВМ видели только NAT-адреса (10.0.2.x) и не пинговались напрямую.
   Как решил: добавил второй сетевой адаптер в режиме Internal Network и выдал им адреса 192.168.56.10 и 192.168.56.11
2. У клиента `ip addr add` не срабатывал (адрес не назначался).
    Как решил: сначала ip addr flush dev enp0s8 потом ip addr add ... — помогло
3. **Сервер не видел клиента через VPN (handshake не шёл).
    Как решил: оказалось, UFW блокировал порт. Разрешил sudo ufw allow 51820/udp, и всё заработало
4. **VPN поднимался, но через время соединение рвалось.
   Как решил: добавил на клиенте PersistentKeepalive = 15 — теперь туннель держится стабильно
